---
title: "Inversi칩n Global en Investigaci칩n y Desarrollo"
subtitle: "An치lisis de Gastos Dom칠sticos en I+D como Porcentaje del PIB"
author: "An치lisis OECD - MSTI Database"
date: today
format:
  html:
    theme: cosmo
    toc: true
    toc-location: left
    code-fold: true
    code-line-numbers: true
    fig-width: 10
    fig-height: 6
execute:
  echo: true
  warning: false
---

## Introducci칩n

La **inversi칩n en Investigaci칩n y Desarrollo (I+D)** es un indicador clave de la capacidad innovadora de un pa칤s y su compromiso con el crecimiento econ칩mico basado en el conocimiento. El indicador **"Gross Domestic Expenditure on Research and Development (GERD) as a percentage of GDP"** mide el total de gastos dom칠sticos en I+D expresados como porcentaje del Producto Interno Bruto.

Seg칰n la OECD, este indicador incluye:

-   **Gastos corrientes y de capital** en los cuatro sectores principales
-   **Empresas privadas**, **Gobierno**, **Educaci칩n superior** y **Organizaciones sin fines de lucro**
-   **Investigaci칩n b치sica**, **investigaci칩n aplicada** y **desarrollo experimental**

Los datos presentados provienen de la base de datos **OECD Main Science and Technology Indicators (MSTI)** y reflejan las tendencias m치s recientes hasta 2023.

## Datos y Preparaci칩n

```{ojs}
// Datos de inversi칩n en I+D como % del PIB (2023)
rd_data = [
  {country: "Israel", value: 6.35, region: "Asia-Pacifico"},
  {country: "Corea del Sur", value: 4.96, region: "Asia-Pacifico"},
  {country: "Suecia", value: 3.60, region: "Europa"},
  {country: "Estados Unidos", value: 3.45, region: "America del Norte"},
  {country: "Jap칩n", value: 3.44, region: "Asia-Pacifico"},
  {country: "B칠lgica", value: 3.32, region: "Europa"},
  {country: "Austria", value: 3.29, region: "Europa"},
  {country: "Suiza", value: 3.25, region: "Europa"},
  {country: "Dinamarca", value: 2.99, region: "Europa"},
  {country: "Alemania", value: 2.95, region: "Europa"},
  {country: "Finlandia", value: 2.85, region: "Europa"},
  {country: "Francia", value: 2.75, region: "Europa"},
  {country: "Islandia", value: 2.65, region: "Europa"},
  {country: "China", value: 2.58, region: "Asia-Pacifico"},
  {country: "Pa칤ses Bajos", value: 2.35, region: "Europa"},
  {country: "Reino Unido", value: 2.25, region: "Europa"},
  {country: "Noruega", value: 2.15, region: "Europa"},
  {country: "Australia", value: 2.05, region: "Asia-Pacifico"},
  {country: "Canad치", value: 1.95, region: "America del Norte"},
  {country: "Italia", value: 1.85, region: "Europa"},
  {country: "Espa침a", value: 1.65, region: "Europa"},
  {country: "Portugal", value: 1.45, region: "Europa"},
  {country: "M칠xico", value: 0.55, region: "America del Norte"}
]
```

```{ojs}
// Configuraci칩n de colores por regi칩n
color_scale = new Map([
  ["Asia-Pacifico", "#ff6b6b"],
  ["Europa", "#4ecdc4"], 
  ["America del Norte", "#45b7d1"]
])
```

```{ojs}
// Estad칤sticas descriptivas
stats = {
  const values = rd_data.map(d => d.value);
  return {
    max: d3.max(values),
    min: d3.min(values),
    mean: d3.mean(values),
    median: d3.median(values),
    countries_above_3: rd_data.filter(d => d.value >= 3.0).length,
    total_countries: rd_data.length
  }
}
```

## Visualizaci칩n Principal: Inversi칩n en I+D por Pa칤s

```{ojs}
viewof selected_region = Inputs.select(
  ["Todas las regiones", "Asia-Pacifico", "Europa", "America del Norte"],
  {label: "Filtrar por regi칩n:", value: "Todas las regiones"}
)
```

```{ojs}
// Filtrar datos seg칰n selecci칩n
filtered_data = selected_region === "Todas las regiones" 
  ? rd_data 
  : rd_data.filter(d => d.region === selected_region)
```

```{ojs}
// Gr치fico de barras principal
Plot.plot({
  title: "Gastos Dom칠sticos en I+D como % del PIB (2023)",
  subtitle: `Pa칤ses seleccionados: ${selected_region}`,
  width: 900,
  height: 500,
  marginLeft: 100,
  marginBottom: 80,
  x: {
    domain: [0, 7],
    label: "Porcentaje del PIB (%)",
    grid: true
  },
  y: {
    label: null,
    domain: filtered_data.map(d => d.country)
  },
  color: {
    domain: Array.from(color_scale.keys()),
    range: Array.from(color_scale.values()),
    legend: true
  },
  marks: [
    Plot.barX(filtered_data, {
      x: "value",
      y: "country",
      fill: "region",
      sort: {y: "x", reverse: true},
      tip: true
    }),
    Plot.text(filtered_data, {
      x: d => d.value + 0.15,
      y: "country",
      text: d => `${d.value}%`,
      fontSize: 11,
      fill: "#333"
    }),
    Plot.ruleX([2.7], {stroke: "#e74c3c", strokeWidth: 2, strokeDasharray: "5,5"})
  ]
})
```

```{ojs}
html`<p style="margin-top: 10px; font-size: 14px; color: #666;">
<strong>L칤nea roja punteada:</strong> Promedio OECD (2.7%)
</p>`
```

## An치lisis por Regiones

```{ojs}
// An치lisis regional
regional_summary = d3.rollup(
  rd_data,
  v => ({
    count: v.length,
    average: d3.mean(v, d => d.value),
    max: d3.max(v, d => d.value),
    min: d3.min(v, d => d.value),
    countries: v.map(d => d.country).join(", ")
  }),
  d => d.region
)
```

```{ojs}
// Tabla resumen por regi칩n
Inputs.table(
  Array.from(regional_summary, ([region, data]) => ({
    "Regi칩n": region,
    "Pa칤ses": data.count,
    "Promedio (%)": data.average.toFixed(2),
    "M치ximo (%)": data.max.toFixed(2),
    "M칤nimo (%)": data.min.toFixed(2)
  })),
  {
    header: {
      "Regi칩n": "Regi칩n",
      "Pa칤ses": "N칰mero de Pa칤ses",
      "Promedio (%)": "Promedio I+D/PIB",
      "M치ximo (%)": "M치ximo",
      "M칤nimo (%)": "M칤nimo"
    }
  }
)
```

## Distribuci칩n y Percentiles

```{ojs}
// Histograma de distribuci칩n
Plot.plot({
  title: "Distribuci칩n de la Inversi칩n en I+D",
  width: 700,
  height: 300,
  x: {
    label: "Porcentaje del PIB (%)",
    domain: [0, 7]
  },
  y: {
    label: "N칰mero de pa칤ses"
  },
  marks: [
    Plot.rectY(rd_data, Plot.binX({y: "count"}, {x: "value", thresholds: 20, fill: "#4ecdc4", opacity: 0.7})),
    Plot.ruleX([stats.mean], {stroke: "#e74c3c", strokeWidth: 2}),
    Plot.ruleX([stats.median], {stroke: "#f39c12", strokeWidth: 2})
  ]
})
```

```{ojs}
html`<p style="margin-top: 10px; font-size: 14px; color: #666;">
<span style="color: #e74c3c;"><strong>L칤nea roja:</strong> Media (${stats.mean.toFixed(2)}%)</span> | 
<span style="color: #f39c12;"><strong>L칤nea naranja:</strong> Mediana (${stats.median.toFixed(2)}%)</span>
</p>`
```

## Insights Clave

```{ojs}
html`
<div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
<h4 style="color: #2c3e50; margin-top: 0;">游늵 Hallazgos Principales</h4>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
  
<div style="background: white; padding: 15px; border-radius: 6px; border-left: 4px solid #ff6b6b;">
<strong>游끥 L칤deres Globales</strong><br>
Israel encabeza con <strong>${stats.max}%</strong> del PIB, seguido por Corea del Sur y Suecia
</div>

<div style="background: white; padding: 15px; border-radius: 6px; border-left: 4px solid #4ecdc4;">
<strong>游깴 Umbral del 3%</strong><br>
Solo <strong>${stats.countries_above_3}</strong> de ${stats.total_countries} pa칤ses superan el 3% del PIB
</div>

<div style="background: white; padding: 15px; border-radius: 6px; border-left: 4px solid #45b7d1;">
<strong>游늳 Promedio OECD</strong><br>
El promedio OECD es <strong>2.7%</strong> del PIB en 2023
</div>

<div style="background: white; padding: 15px; border-radius: 6px; border-left: 4px solid #f39c12;">
<strong>游깶 Dominancia Asi치tica</strong><br>
Asia representa <strong>46%</strong> del gasto global en I+D
</div>

</div>
</div>
`
```

## Top 10 Pa칤ses

```{ojs}
// Top 10 pa칤ses
top_10 = rd_data
  .sort((a, b) => b.value - a.value)
  .slice(0, 10)
```

```{ojs}
Plot.plot({
  title: "Top 10 Pa칤ses en Inversi칩n I+D/PIB",
  width: 600,
  height: 350,
  x: {
    label: null,
    tickRotate: -45
  },
  y: {
    label: "Porcentaje del PIB (%)",
    domain: [0, 7]
  },
  color: {
    domain: Array.from(color_scale.keys()),
    range: Array.from(color_scale.values())
  },
  marks: [
    Plot.barY(top_10, {
      x: "country",
      y: "value",
      fill: "region",
      tip: true
    }),
    Plot.text(top_10, {
      x: "country",
      y: d => d.value + 0.15,
      text: d => `${d.value}%`,
      fontSize: 10,
      fill: "#333"
    })
  ]
})
```

## Explorador Interactivo

```{ojs}
viewof selected_country = Inputs.select(
  rd_data.map(d => d.country),
  {label: "Seleccionar pa칤s para detalles:", value: "Israel"}
)
```

```{ojs}
// Detalles del pa칤s seleccionado
country_detail = rd_data.find(d => d.country === selected_country)
```

```{ojs}
html`
<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 12px; margin: 20px 0;">
<h3 style="margin-top: 0; font-size: 24px;">${country_detail.country}</h3>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 15px;">
  
<div>
<div style="font-size: 32px; font-weight: bold;">${country_detail.value}%</div>
<div style="opacity: 0.9;">del PIB en I+D</div>
</div>

<div>
<div style="font-size: 18px; font-weight: bold;">${country_detail.region}</div>
<div style="opacity: 0.9;">Regi칩n</div>
</div>

<div>
<div style="font-size: 18px; font-weight: bold;">
${(country_detail.value / stats.mean).toFixed(1)}x
</div>
<div style="opacity: 0.9;">vs. promedio OECD</div>
</div>

<div>
<div style="font-size: 18px; font-weight: bold;">
#${rd_data.sort((a, b) => b.value - a.value).findIndex(d => d.country === country_detail.country) + 1}
</div>
<div style="opacity: 0.9;">Ranking mundial</div>
</div>

</div>
</div>
`
```

## Metodolog칤a y Fuentes

### Definici칩n del Indicador

El **Gasto Dom칠stico Bruto en Investigaci칩n y Desarrollo (GERD)** como porcentaje del PIB incluye:

1.  **Gastos corrientes y de capital** en I+D
2.  **Cuatro sectores principales:**
    -   Empresas comerciales
    -   Gobierno
    -   Educaci칩n superior\
    -   Organizaciones privadas sin fines de lucro
3.  **Tres tipos de investigaci칩n:**
    -   Investigaci칩n b치sica
    -   Investigaci칩n aplicada
    -   Desarrollo experimental

### Fuentes de Datos

-   **Fuente principal:** OECD Main Science and Technology Indicators (MSTI) Database
-   **URL:** [https://data-explorer.oecd.org](https://data-explorer.oecd.org/vis?df%5Bds%5D=dsDisseminateFinalDMZ&df%5Bid%5D=DSD_MSTI%40DF_MSTI&df%5Bag%5D=OECD.STI.STP&vw=tb)
-   **Datos complementarios:** World Bank, UNESCO Institute for Statistics
-   **A침o de referencia:** 2023 (datos m치s recientes disponibles)
-   **Metodolog칤a:** Paridades de Poder Adquisitivo (PPP), precios constantes base 2015

### Notas T칠cnicas

-   Los datos incluyen I+D financiada desde el extranjero pero excluyen fondos dom칠sticos para I+D realizada fuera del territorio nacional
-   Las cifras est치n expresadas en d칩lares estadounidenses constantes usando PPP para permitir comparaciones internacionales
-   Algunos pa칤ses pueden tener metodolog칤as ligeramente diferentes en la recopilaci칩n de datos

------------------------------------------------------------------------
# Objetos en observable

## Diagrama de radar

``` {ojs}
// Datos: 30 indicadores con su valor (aqu칤 puse valores ficticios que puedes reemplazar)
data = [
  {axis: "1. Evaluaci칩n comunitaria", value: 1.2},
  {axis: "2. Evaluaci칩n cient칤fica del riesgo", value: 2.0},
  {axis: "3. Diseminaci칩n de informaci칩n en RRD", value: 2.5},
  {axis: "4. Educaci칩n de los ni침os en RRD", value: 3.0},
  {axis: "5. RRD en la planificaci칩n del desarrollo", value: 1.8},
  {axis: "6. RRD en la planificaci칩n territorial", value: 2.0},
  {axis: "7. Toma comunitaria de decisiones", value: 2.2},
  {axis: "8. Inclusi칩n de grupos vulnerables", value: 1.7},
  {axis: "9. Participaci칩n de las mujeres", value: 2.3},
  {axis: "10. Conocimiento de derechos", value: 1.9},
  {axis: "11. Alianzas para la RRD", value: 2.6},
  {axis: "12. Gesti칩n ambiental sostenible", value: 2.1},
  {axis: "13. Seguridad y gesti칩n del agua", value: 1.8},
  {axis: "14. Acceso y conciencia de la salud", value: 1.6},
  {axis: "15. Suministro seguro de alimentos", value: 1.4},
  {axis: "16. Pr치cticas de medios de vida", value: 1.3},
  {axis: "17. Acceso a mercado", value: 1.5},
  {axis: "18. Acceso a servicios financieros", value: 1.2},
  {axis: "19. Protecci칩n de ingresos y activos", value: 1.7},
  {axis: "20. Acceso a protecci칩n social", value: 2.0},
  {axis: "21. Cohesi칩n social", value: 3.2},
  {axis: "22. Infraestructura cr칤tica", value: 2.8},
  {axis: "23. Vivienda", value: 1.9},
  {axis: "24. Planificaci칩n de contingencia", value: 2.1},
  {axis: "25. Sistema de alerta temprana", value: 2.3},
  {axis: "26. Capacidad de preparaci칩n", value: 2.0},
  {axis: "27. Servicios de salud", value: 2.5},
  {axis: "28. Servicios de educaci칩n", value: 2.9},
  {axis: "29. Infraestructura en emergencias", value: 2.7},
  {axis: "30. Liderazgo y voluntariado", value: 3.0}
]

// Radar chart con D3
{
  const width = 600, height = 600;
  const radius = Math.min(width, height) / 2 - 60;
  const levels = 5; // n칰mero de c칤rculos conc칠ntricos
  const maxValue = 3.5; // escala m치xima

  const angleSlice = (Math.PI * 2) / data.length;

  const rScale = d3.scaleLinear()
    .domain([0, maxValue])
    .range([0, radius]);

  const svg = d3.create("svg")
    .attr("width", width)
    .attr("height", height);

  const g = svg.append("g")
    .attr("transform", `translate(${width/2},${height/2})`);

  // Dibujar c칤rculos conc칠ntricos
  for (let i = 0; i <= levels; i++) {
    g.append("circle")
      .attr("r", radius/levels * i)
      .attr("fill", "none")
      .attr("stroke", "#ccc");
  }

  // Ejes radiales
  data.forEach((d, i) => {
    const angle = angleSlice * i - Math.PI/2;
    g.append("line")
      .attr("x1", 0)
      .attr("y1", 0)
      .attr("x2", rScale(maxValue) * Math.cos(angle))
      .attr("y2", rScale(maxValue) * Math.sin(angle))
      .attr("stroke", "#999");

    // Etiquetas
    g.append("text")
      .attr("x", (rScale(maxValue + 0.2)) * Math.cos(angle))
      .attr("y", (rScale(maxValue + 0.2)) * Math.sin(angle))
      .attr("dy", "0.35em")
      .style("font-size", "10px")
      .style("text-anchor", angle > Math.PI/2 && angle < 3*Math.PI/2 ? "end" : "start")
      .text(d.axis);
  });

  // L칤nea de valores
  const line = d3.lineRadial()
    .radius(d => rScale(d.value))
    .angle((d,i) => i * angleSlice)
    .curve(d3.curveLinearClosed);

  g.append("path")
    .datum(data)
    .attr("d", line)
    .attr("fill", "rgba(50,150,250,0.5)")
    .attr("stroke", "steelblue")
    .attr("stroke-width", 2);

  return svg.node();
}
```

## Tablas

Tabla con D3.js puro

```{ojs}
// Datos de ejemplo
paises_data = [
  { Pa칤s: "Colombia", Poblaci칩n: 52000000, Regi칩n: "Am칠rica" },
  { Pa칤s: "Chile", Poblaci칩n: 19000000, Regi칩n: "Am칠rica" },
  { Pa칤s: "Espa침a", Poblaci칩n: 47000000, Regi칩n: "Europa" }
]
```

```{ojs}
// Tabla creada con D3
{
  const data = paises_data;
  const table = d3.create("table")
    .style("border-collapse", "collapse")
    .style("width", "100%");

  const thead = table.append("thead");
  const tbody = table.append("tbody");

  const columns = Object.keys(data[0]);

  // encabezados
  thead.append("tr")
    .selectAll("th")
    .data(columns)
    .enter()
    .append("th")
    .text(d => d)
    .style("border", "1px solid #ccc")
    .style("background", "#f4f4f4")
    .style("padding", "8px");

  // filas
  const rows = tbody.selectAll("tr")
    .data(data)
    .enter()
    .append("tr");

  rows.selectAll("td")
    .data(d => columns.map(c => d[c]))
    .enter()
    .append("td")
    .text(d => d)
    .style("border", "1px solid #ccc")
    .style("padding", "8px");

  return table.node();
}
```

Tabla con filtros usando Inputs.table

```{ojs}
viewof filtro = Inputs.select(["Todas", "Am칠rica", "Europa"], {label: "Filtrar por regi칩n:", value: "Todas"})
```

```{ojs}
// Datos filtrados
paises_filtrados = filtro === "Todas"
  ? paises_data
  : paises_data.filter(d => d.Regi칩n === filtro)
```

```{ojs}
Inputs.table(paises_filtrados, {
  header: {
    "Pa칤s": "Pa칤s",
    "Poblaci칩n": "Poblaci칩n",
    "Regi칩n": "Regi칩n"
  }
})
```

*Documento generado con [Quarto](https://quarto.org/) y [Observable JS](https://observablehq.com/)*